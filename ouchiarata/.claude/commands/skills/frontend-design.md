# Frontend Design Module

あなたはフロントエンドデザインの専門家である。Nuxt 4.2.2 + TypeScript + Tailwind CSS + Vue SFC の環境で、**コードレベルでデザインを改善する**。

---

## 実行フロー

### Step A: モード選択

AskUserQuestion ツールを使い、モードを選択させる:
- **Replace** — 既存ページをターゲットデザインに合わせて大胆にリデザインする
- **Refine** — 情報のタクソノミーを整理し、ターゲットデザイン言語との整合性を上げる

### Step B: ターゲットデザインの決定

AskUserQuestion ツールを使い、デザインソースを選択させる:
- **このプロジェクト内を走査** — プロジェクト内の既存コード（`.vue` ファイル等）を走査してデザイントークンを抽出する
- **既存の repomix ファイルを参照** — リポジトリ内にある repomix XML を読み取る
- **今から repomix する** — 現在のリポジトリに対して `repomix` を実行し、出力を参照する
- **手動で指定** — ユーザーがデザインの方向性をテキストで記述する

#### 「このプロジェクト内を走査」の場合

1. Glob で `**/*.vue` を検索し、スタイルを含むファイルを特定する
2. Grep でカラー値、フォント設定、スペーシング、border-radius 等のデザイン関連クラスを抽出する
3. `tailwind.config.*` や CSS 変数定義ファイルがあれば読み取る
4. 抽出した情報を**デザイントークン抽出チェックリスト**に沿って整理する
5. 抽出結果をユーザーに提示し、承認を得る

#### 「既存の repomix ファイルを参照」の場合

1. Glob で `**/*repomix*.xml` を検索し、候補を一覧表示する
2. 複数見つかった場合は AskUserQuestion で選択させる（1つなら自動選択）
3. ファイルを読み、以下の**デザイントークン抽出チェックリスト**に沿って情報を抽出する
4. 抽出結果をユーザーに提示し、承認を得る

#### 「今から repomix する」の場合

1. `npx repomix --version` を実行し、repomix が利用可能か確認する
2. 利用不可の場合、`npm install -g repomix` でインストールする。それでも失敗する場合は `npx repomix` にフォールバックする
3. リポジトリルートで `repomix --output repomix-output.xml` を実行する
4. 生成されたファイルを読み、以下の**デザイントークン抽出チェックリスト**に沿って情報を抽出する
5. 抽出結果をユーザーに提示し、承認を得る

#### 「手動で指定」の場合

1. AskUserQuestion でデザインの方向性を尋ねる（例: 「モノクロ・ミニマル」「暖色系SaaS」「ブルータリスト」等）
2. ユーザーの記述から**デザイントークン抽出チェックリスト**を埋める
3. 不足情報は合理的なデフォルトを提案し、承認を得る

### Step C: 対象ファイルの指定

AskUserQuestion で対象ファイル・ページを尋ねる

### Step D: 実行

1. 既存コードを読み、現行デザインとターゲットデザインの差分を把握する
2. 改善案を提示し、承認後にコードを変更する
3. 後方互換性を保つ必要があると判断した場合はユーザーに確認を行う

---

## デザイントークン抽出チェックリスト

ターゲットデザインから以下の項目を必ず抽出・決定する。
抽出した値はセッション中の**すべてのデザイン判断の基準**となる。

### 1. カラーパレット

以下の用途ごとに具体的な Tailwind クラスまたは CSS 値を決定する:

| 用途 | 抽出すべき値 |
|------|-------------|
| 主要テキスト | 例: `text-black`, `text-gray-900` |
| 本文テキスト | 例: `text-black/70`, `text-gray-600` |
| 副次・補助テキスト | 例: `text-black/50`, `text-gray-400` |
| 装飾テキスト (ゴースト番号等) | 例: `text-black/[0.08]` |
| 主要ボーダー | 例: `border-black/10`, `border-gray-200` |
| 強調ボーダー / ホバーボーダー | 例: `border-black/20`, `hover:border-black/40` |
| 背景 (通常) | 例: `bg-white`, `bg-gray-50` |
| 背景 (ホバー) | 例: `hover:bg-black/[0.02]` |
| CTA ホバー | 例: `hover:bg-black hover:text-white` |
| ヘッダー背景 | 例: `bg-white/80 backdrop-blur-xl` |
| アクセント / ブランドカラー | 例: なし (モノクロ), `blue-500` 等 |
| セマンティック (ステータス用) | 使用する / しない / ダッシュボードのみ |

**同時に決定:** 禁止カラー（現行コードで使っているが排除すべき色）

### 2. タイポグラフィ

| 用途 | 抽出すべき値 |
|------|-------------|
| フォントファミリー | 例: `Inter, "Noto Sans JP", sans-serif` |
| Hero 見出し | サイズ, ウェイト, line-height, letter-spacing |
| セクション見出し | 同上 |
| CTA 見出し | 同上 |
| Feature タイトル | 同上 |
| 本文 | 同上 |
| セクションラベル | 同上 + 言語 (日本語のみ / 英語uppercase等) |
| ボタンテキスト | 同上 |
| ロゴ | 同上 |
| 統計値 | 同上 |
| 装飾番号 | 同上 |

**同時に決定:**
- 見出しの基本ウェイト (`font-light` / `font-semibold` / `font-bold` 等)
- 見出しに対する禁止ウェイト

### 3. 形状 (border-radius)

| 要素 | 抽出すべき値 |
|------|-------------|
| ボタン | 例: `rounded-none`, `rounded-md`, `rounded-full` |
| カード | 同上 |
| バッジ | 同上 |
| アイコンコンテナ | 形状 + ボーダーの有無 |
| UI プリミティブ (ダイアログ等) | 同上 |

**同時に決定:** ページレベルで禁止する border-radius 値

### 4. レイアウト

| 項目 | 抽出すべき値 |
|------|-------------|
| 最大幅 | 例: `max-w-7xl`, `max-w-[1800px]` |
| グリッドシステム | 例: 12カラム固定, 用途別可変 |
| コンテンツ余白 | 例: `px-8 lg:px-16` |
| セクション余白 | 例: `py-32`, `py-20`〜`py-32` |
| 見出し→コンテンツ間 | 例: `mb-24`, `mb-12` |
| セクション区切り | 例: `border-t`, グラデーション, 余白のみ |
| ヘッダー高さ | 例: `h-24`, `h-16` |
| コンテンツ境界線 | あり / なし |

### 5. アイコン

| 項目 | 抽出すべき値 |
|------|-------------|
| ストローク幅 | 例: `1.5`, `2` |
| コンテナ形状 | 例: 正方形ボーダー, 丸型背景色, なし |
| コンテナサイズ | 例: `size-16`, `size-12` |
| アイコンサイズ | 例: `size-7`, `size-5` |
| ホバー演出 | 例: `transition-colors` のみ, spin, bounce |

### 6. スペーシング

| 箇所 | 抽出すべき値 |
|------|-------------|
| セクション間 | 例: `py-32` (128px) |
| 見出し→コンテンツ | 例: `mb-24` (96px) |
| カード内部 | 例: `p-10`〜`p-12` |
| グリッドギャップ | 例: `gap-8`〜`gap-16` |
| ボタンパディング | 例: `px-8 py-4` |

### 7. 背景効果

| 効果 | 使用可否と実装 |
|------|--------------|
| グラスモーフィズム | どこに / どこに使わないか |
| ダーク/ライト交互セクション | 使う / 禁止 |
| 装飾的グロウ / ぼかし | 使う / 禁止 |
| ノイズテクスチャ | 使う / 禁止、範囲 |
| グリッドオーバーレイ | 使う / 禁止、仕様 |

### 8. アニメーション

| パターン | 実装方法 |
|----------|---------|
| スクロール表示 | トリガー方法 + 初期値 → 終了値 |
| スタッガー | ディレイ間隔 |
| ホバー (カード) | 例: translateY, scale, shadow |
| ホバー (行要素) | 例: translateX, 背景色変化 |
| ホバー (ボタン) | 例: 白黒反転, scale |
| 表示トランジション時間 | 例: `0.8s`, `0.5s` |
| CSS transition 基本値 | 例: `transition-all duration-300` |

**同時に決定:** 禁止アニメーション (例: scale press, box-shadow glow, icon spin 等)

### 9. ホバー演出ルール

要素ごとのホバー演出を一覧化する:
- カード
- Feature 行
- CTA ボタン
- ボーダー要素
- リンク

**同時に決定:** 禁止ホバー演出

---

## 依存スキル

Step D の実行前に、以下のスキルファイルを Read ツールで読み込み、内容に従う:

| スキル | ファイル |
|--------|---------|
| デザイン原則 | `.claude/commands/skills/design-principles.md` |
| コーディング規約 | `.claude/commands/skills/coding-conventions.md` |
